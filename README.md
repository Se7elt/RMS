
Туториал

Для запуска Сервера - запускаем main_server.py
Для запуска Сервера-посредника - запускаем main_proxy.py

Перед запуском программы нужно сделать важные установки:
- СИСТЕМА REDOS, ВАЖНО….
- Установить PostgreSQL
- Установка pgAdmin
- Установка Pycharm
1) Ставим RedOS, любая рабочая среда.

При установке задаем пароль для суперпользователя и, ОЧЕНЬ ВАЖНО, создаем обычного пользователя. RedOS не позволяет зайти под root

После установке, желательно, обновляем пакеты

Sudo dnf update

Переходим к следующему пункту

2) Установка PostgreSQL. Установка простая, но очень долго объяснять. Смотрим и следуем командам из этого источника:
   
https://redos.red-soft.ru/base/redos-7_3/7_3-administation/7_3-smdb-in-ro/7_3-install-postgresql/?nocache=1731227258397

Выполняем следующее разделы:

- Установка и настройка PostgreSQL

- Дополнительные возможности для PostgreSQL

- Решение проблемы: после установки не удается подключиться к PostgreSQL через pgadmin4

Как только эти пункты настроены, переходим к следующему пункту

3) Установка pgAdmin:

https://redos.red-soft.ru/base/redos-7_3/7_3-administation/7_3-smdb-in-ro/7_3-pgadmin/?nocache=1731227262321

Делаем по инструкции до раздела «Настройка pgAdmin4 в качестве внешнего web-сервиса». Он не нужен
Для входа в базу данных, вводим имя сервера (любой пишет, который заходите)

![1](https://github.com/user-attachments/assets/a741dbdd-7b36-4b06-90fb-3fa18aa82e7f)

Нажимаем соединение и вводим туда данные

Имя/адрес сервера – туда либо вводим localhost, либо реальный адрес машины. Я вводил localhost

Пароль вводим тот, который вы указывали в пункте 2 «Решение проблемы: после установки не удается подключиться к PostgreSQL через pgadmin4»

 ![2](https://github.com/user-attachments/assets/42721f77-dbec-454a-92bd-e108e133e0f0)

Если вы не накосячили где-то, то без проблем сможете подключится. После подключения увидите следующую структуру
 ![3](https://github.com/user-attachments/assets/83655165-9de9-409a-8839-1a9285439ba3)

Далее нужно создать пользователя, который мы пропишем в код, чтобы он добавлял информацию из сообщений в бд. Нажимаем правой кнопкой мыши по «Роли входа/группы» и нажимаем «Создать – Роль входа/группы…»
 ![5](https://github.com/user-attachments/assets/bceb3cc1-63bd-4e50-85c0-1fc99d23c298)

Как только нажали, откроется окно, в котором нужно задать всё необходимое для создания пользователя

Вводим имя, я использовал «Metric»

 ![4](https://github.com/user-attachments/assets/930ff97c-af94-461b-840a-5a6863149e67)

В вкладке «Определение» вводим пароль для этого пользователя.

Переходим во вкладку «Права» и ставим эти галочки:

 ![6](https://github.com/user-attachments/assets/cb57014f-ec1e-44df-acaa-518ea4c29dba)

Нажимаем «Сохранить» и всё, пользователь создан

4) Устанавливаем PyCharm
   
Делаем по этому гайду и установка будет завершена:

Установка PyCharm на Linux с использованием tar

Чтобы установить PyCharm на Linux с использованием tar-архива, вам нужно:

1.	На официальном сайте компании JetBrains выбрать версию PyCharm —Community — и загрузить архив .tar.gz.
   
3.	После того, как вы загрузили архив, распакуйте его с помощью команды (или вручную в проводнике):
sudo tar -xzf pycharm-<version>.tar.gz

Замените <version> на версию PyCharm, которую вы загрузили.

3.	После распаковки архива перейдите в подкаталог bin:
   
cd pycharm-<version>/bin

5.	Запустите PyCharm из подкаталога bin:
   
sh pycharm.sh

После запуска PyCharm вы увидите экран приветствия, отправную точку для работы с интегрированной средой разработки и настройки ее параметров.

Далее, после запуска любого из кодов (Сервера или Сервера-посредника) нужно будет ввести данные для входа. Если в качестве почтового сервера вы выбрали Google, то нужно немного настроить аккаунт Гугл. С 2021 года, если не ошибаюсь, Google запретил использовать стандартный пароль от почты в приложения и кодах, в рамках безопасности. Поэтому нужно сделать специальный «Пароль приложения». Вот все шаги, которые необходимо выполнить:

Чтобы получить пароль приложения в Gmail, вам нужно будет включить двухфакторную аутентификацию и затем сгенерировать пароль приложения. Этот пароль используется для подключения к Google-сервисам из приложений и устройств, которые не поддерживают двухфакторную аутентификацию. Вот пошаговая инструкция:

Шаг 1: Включение двухфакторной аутентификации

1. Войдите в Google-аккаунт:

Перейдите на myaccount.google.com и войдите в свой аккаунт, если это не сделано заранее.

2. Перейдите в раздел "Безопасность":
   
В меню слева выберите раздел "Безопасность".

3. Настройте двухфакторную аутентификацию:
   
В разделе "Вход в аккаунт Google" найдите строку "Двухэтапная аутентификация" и нажмите "Настроить" (если у вас она еще не включена).

Следуйте инструкциям на экране для настройки двухфакторной аутентификации (обычно это включает добавление номера телефона или приложения Google Authenticator).

4. Подтвердите включение двухфакторной аутентификации:

После того, как вы успешно настроите двухфакторную аутентификацию, вернитесь на страницу "Безопасность".

Шаг 2: Генерация пароля приложения

После включения двухфакторной аутентификации можно создать пароль для конкретного приложения.

1. Перейдите к настройке паролей приложений:
   
В том же разделе "Безопасность" в разделе "Вход в аккаунт Google" появится пункт "Пароли приложений" (эта опция доступна только после включения двухфакторной аутентификации). Нажмите на "Пароли приложений".

3. Подтвердите вход:
   
Google может попросить вас ввести пароль аккаунта и пройти аутентификацию еще раз для подтверждения, что это действительно вы.

4. Выберите устройство и приложение:

В разделе "Выберите приложение и устройство" укажите, для чего создаете пароль.

Например, выберите Почта и Компьютер Windows (или другое устройство, которое будет использовать этот пароль).

Если нужного варианта нет, выберите "Другое (с именем)" и введите название, чтобы понимать, для чего этот пароль создан (например, "Почтовый клиент на работе").

5. Сгенерируйте пароль:

Нажмите на кнопку "Создать", и Google сгенерирует уникальный 16-значный пароль, который выглядит как набор букв и цифр.

6. Используйте пароль приложения:
   
Скопируйте этот пароль и вставьте его в нужное поле для подключения к Gmail (например, в настройки почтового клиента). Запоминать его не обязательно, так как для каждого нового приложения можно генерировать новый пароль.

7. Завершите настройку:
   
После того как пароль будет успешно использован, настройка завершена. Вы можете закрыть окно с паролем, так как при необходимости можно сгенерировать новый.

Важно:

Один пароль — одно приложение: Если нужно настроить другой почтовый клиент или устройство, сгенерируйте новый пароль приложения.

Безопасность: Пароль приложения работает только как одноразовый для аутентификации конкретного устройства или приложения. Если вы удалите пароль, приложение больше не сможет войти, и потребуется создать новый.

Контроль доступа: Если подозреваете, что кто-то использовал ваш пароль приложения, удалите его в разделе "Пароли приложений", и доступ будет отозван.

Теперь вы можете использовать созданный пароль для доступа к Gmail через сторонние приложения, такие как почтовые клиенты, поддерживающие SMTP/IMAP, но не поддерживающие двухфакторную аутентификацию напрямую. 

ВАЖНО, ОЧЕНЬ!!!!!!1

Так как вы пока используете сервер и сервер-посредник, то вам нужно две таких почты – одна для сервера, другая сервера-посредника, и их так же нужно настроить для получения «Пароля приложения»

После того, как вы все сделали, запускайте код. Вводим данные и на выходе, в файле config.ini, сохраняются данные, которые вы вели. К примеру, так у меня вышло, когда я ввёл свои данные:
Сервер:

 ![7](https://github.com/user-attachments/assets/b7cecd56-d45d-4d2a-8b72-e78de31eddf0)

Сервер-посредник:

 ![8](https://github.com/user-attachments/assets/95423438-df45-4461-b368-989159ed0e20)

В качестве smtp_server пишем – smtp.gmail.com
В качестве smtp_port пишем – 587
В качестве imap_server пишем – imap.gmail.com
В качестве паролей пишем – пароль приложения с ПРОБЕЛАМИ
Порядок запуска приложений :
-Сервер
-Сервер-посредник
-Клиент (у вас его пока нет)
Возможно произойдет ошибка при подключении к почте:

Возможно три варианта событий:

- Вы неправильно ввели данные почт
  
- Код временно разорвал соединение, на сервере я настроил автоматическое переподключение. На сервере-посредники у меня не появлялся разрыв, но вроде как переподключение там настроено (честно не помню)
  
- Просто перезапустите код. Важно, иногда нужно дважды его вырубать, так как включена многопоточность. Выключение одного раза – может просто отключить один поток, а код до сих пор будет работать
  
Если всё успешно, в БД добавятся все необходимые таблицы с записями:

 ![Начальная структура таблиц](https://github.com/user-attachments/assets/80d8f8b4-8371-4f4c-aa40-742d5769f9a8)

Примерная структура таблиц, может отличаться в плане ip-адреса
 ![Пример таблицы с показателями](https://github.com/user-attachments/assets/6c6b39ac-99f2-4cf4-ad8f-5f589ebcbcb3)

Таблица с собранными метриками
 ![Пример таблицы со сведениями о системе](https://github.com/user-attachments/assets/73c284a7-dd0c-4b83-883c-9a7502d1eb6e)

Таблица с собранными характеристиками систем
